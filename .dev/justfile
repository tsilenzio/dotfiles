# Development/testing utilities (internal use)
# Usage: just dev <recipe>

set shell := ["bash", "-cu"]

DEV_DIR := justfile_directory()
SCRIPTS_DIR := DEV_DIR / "scripts"
DOTFILES_DIR := parent_directory(DEV_DIR)

# Show dev commands
default:
    @just --justfile "{{justfile()}}" --list

# Install CLT and Homebrew from .cache/ (offline installers)
setup:
    "{{SCRIPTS_DIR}}/setup.sh"

# Pre-fetch Homebrew packages: test (default), work, personal, all
prefetch *args:
    "{{SCRIPTS_DIR}}/prefetch.sh" {{args}}

# Test bootstrap: local (default) or curl (emulates curl|bash)
bootstrap *args:
    "{{SCRIPTS_DIR}}/test.sh" {{args}}

# Run install with test bundle visible
install:
    "{{DOTFILES_DIR}}/install.sh" --reveal test

# Run linters (shellcheck + zsh syntax)
lint:
    "{{SCRIPTS_DIR}}/lint.sh"
